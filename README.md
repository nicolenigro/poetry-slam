# POGET
POGET (Process-Oriented Generator and Evaluator of Tankas) is a system for generating and evaluating poems in the tanka form.

## Description
In honor of Asian Heritage Month (celebrated during April here at Bowdoin), I wanted my poetry generator to create poems in a form native to Asia and have my poems inspired by an inspiring set of poems by Asian American authors. I chose the tanka, which is a poetry form that originated in Japan in the seventh century. My inspiring set includes poem from Asian American authors I know of (and have read in New Fictions of Asian America with Professor Kong!) like Cathy Park Hong and Ocean Vuong and also up-and-coming poets I found on [Poetry Foundation](https://www.poetryfoundation.org/collections/101589/asian-american-voices-in-poetry).

POGET reads in the inspiring set of poems and uses the words from those poems to create bigrams, which are two-word ngrams. These bigrams are used to make weighted decisions when picking the next word in the tanka. When thinking about tying in creativity theories that we learned in class, I was particularly drawn to the process component of Jordanous' PPPPerspectives. From my research, I learned about the process of tanka poets: they usually begin writing the kami-no-ku (first 3 lines; 5-7-5), then write the shimo-no-ku (last 2 lines; 7-7), and lastly make edits to the tanka to polish it and make sure it fits a tanka syllable pattern. To honor this process, the tankas generated by system are written by calling write_kaminoku(), write_shimonoku(), and edit_tanka(). The contextual information that inspire my computational poet are form rules like a tanka should not start with an article (DT) and the different stylistic syllable patterns a tanka can follow. Tankas traditionally follow a 5-7-5-7-7 syllable pattern, but my system recognizes other patterns that change up the standard rhythm such as exceeding the typical syllable count (ji-amari; 5-7-5-8-7), running short (ji-tarazu; 5-7-5-7-6), splitting (ku-ware; 5-7-5-9-5), and straddling (ku-matagari; 8-4-5-7-7). 

Tankas are evaluated for emotions, grammar, and understandability. I used the python packages text2emotion and textstat to determine the emotions present in the tanka as well as the tanka's Flesch Reading Ease Score. I created my own CFG file based off of CFG concepts and rules I learned in Principles of Programming Languages with Professor Irfan and some additional outside research. The CFG file also has all words in the lexicon categorized by POS, which I was able to do using pos_tag from the NLTK package. Tankas are evaluated against the grammar rules in grammar.cfg to evaluate whether or not they follow them. All of the metrics, along with the tanka's syllable pattern, are exported to a metrics folder.

When researching, I also learned about kakai (translates to "poetry meeting")--a real world forum specific to tanka. In kakai, attendees submit poems anonymously, then read and discuss each other's work. To reflect kakai performances, I have the 4 different voices available on my OS and randomly choose one to perform each tanka. Tanka poems [do not traditionally have titles](http://www.graceguts.com/essays/why-say-more-the-problem-of-titling-tanka) which is why my tankas are titleless, exported to my output folder with simple filenames like "tanka1.txt"

This system is a way for me to pay homage to recent Anti-Asian American violence and the Asian American component of my identity ðŸ’ž

## How to Set Up and Run the Code
1. Open the terminal.
2. Change your directory to the folder you want to store this code in.  
```
$ cd Documents/GitHub
```
3. Clone this repository onto your computer with the following line:  
```
$ git clone https://github.com/nicolenigro/poetry-slam.git
```
4. Change your directory to the folder for this project.  
```
$ cd poetry-slam
```
5. Install all the necessary packages with the following commands:
```
$ pip3 install nltk
$ pip3 install syllapy
$ pip3 install text2emotion
$ pip3 install textstat
$ pip3 install num2words
```
6. Type and enter the following line into the terminal to run the program.  
```
$ python3 poetry_generator.py
```

## Challenges
I had a lot of challenges installing packages that I wanted to use and dealing with errors in the terminal. I discovered that even though I have the latest version of Python installed on my computer, Python 2.7 was linked and the default, which creates lots of errors. I troubleshooted errors by googling, looking online for different commands to fix all the problems I was having, and was ultimately able to implement all but 1 package, [torchMoji](https://github.com/huggingface/torchMoji). I ended up reaching out to the developer via email and it turns out it is not compatible with the version of Python I am running (3.9.4). Working through errors in the terminal was really tough and required patience, but I persevered and feel like I am now equipped to deal with all sorts of problems related to installing packages, homebrew, and the terminal.

I also really struggled with finding a way to incorporate grammar rules into my system. I have learned about CFG and parse trees in PPL so I wanted to push myself to draw connections between my CS classes and use some of those linguistic concepts. From my research, I decided the best way to implement this would be creating my own CFG, but I struggled to create the CFG file.

## Scholarly Papers That Inspired My Approach
* [A Survey on Intelligent Poetry Generation: Languages, Features, Techniques, Reutilisation and Evaluation](https://www.aclweb.org/anthology/W17-3502/)
	* This article referenced Manurung, who claims that besides poeticness, a poetic text "must obey linguistic conventions, prescribed by a given grammar and lexicon (grammaticality); and it must convey a conceptual message, meaningful under some interpretation (meaningfulness)" (13). I incorporated grammaticality through my evaluate_grammar() function which evaluates a poem according to the CFG that I wrote. Meaningfulness is hard to objectively measure, so I had a live audience react to my generator to gauge meaningfulness. The evaluation section also gave me some ideas for how I would evaluate the tankas generated by my poem. I was inspired to evaluate tankas by emotions, understandability, and grammar. However this paper emphasized that it is hard to evaluate systems automatically, which is another reason I chose to have a live human reaction to/evaluation of my poetry.
* [Automatic generation of poetry: an overview](https://www.researchgate.net/profile/Hugo-Goncalo-Oliveira/publication/228610670_Automatic_generation_of_poetry_an_overview/links/00b7d517eea41271af000000/Automatic-generation-of-poetry-an-overview.pdf)
	* This article mentioned Manurung's taxonomy for poetry generation systems, and I was inspired to create a form-aware poetry generation system. In form-aware systems, the choice of words follows a pre-defined text form by following metrical rules (properties of grammaticality and poeticness). I implemented the syllapy package to check how many syllables are in a line/poem as I'm writing them and also for evaluating which category of tanka the poem falls into; I use syllapy to ensure that my tankas follow the metrical rules of a recognized syllable pattern. I was particularly inspired by Levy's POEVOLVE--a form-aware system--in which "the real process of human poetry writing is taken as a reference from which to draw the intuitions that drive the system" (3). Levy's model gave me an idea of the components I needed to implement: a generator module, evaluator modules, a lexicon, and a syntactical knowledge base.
* [Fixed Verse Generation using Neural Word Embeddings](https://core.ac.uk/download/pdf/79584968.pdf)
	* I was inspired by the classification process mentioned in this paper. I decided to tokenize sentences from my inspiring set into bigrams (2-word ngrams) with a create_ngrams() function. I also was inspired to tag each word with POS-tags, which I did to categorize words in the knowledge base into different POS categories, which was a necessary step for creating my CFG file.

## Sources
* https://docs.huihoo.com/nltk/0.9.5/en/ch07.html
* https://poets.org/glossary/tanka
* https://pypi.org/project/syllapy/
* https://pypi.org/project/textstat/
* https://tankajournal.com/what-is-tanka/
* https://towardsdatascience.com/how-to-efficiently-remove-punctuations-from-a-string-899ad4a059fb
* https://towardsdatascience.com/text2emotion-python-package-to-detect-emotions-from-textual-data-b2e7b7ce1153
* https://web.stanford.edu/~jurafsky/slp3/12.pdf
* https://www.fireblazeaischool.in/blogs/grammar-checking-using-nltk/
* https://www.kite.com/python/docs/nltk.pos_tag
* https://www.nltk.org/book/ch08.html
* https://www.tandfonline.com/doi/full/10.1080/19342039.2016.1120610
* https://www.wikihow.com/Write-a-Tanka-Poem